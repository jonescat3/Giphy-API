<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Funny Animals</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script src="main.js"></script>
    <style type="text/css">
        button,
        div,
        form,
        input {
            margin: 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Animal Search</h1>

    <div id="buttons">
        <button data-animal="cat">cat</button>
        <button data-animal="dog">dog</button>
        <button data-animal="pig">pig</button>
        <button data-animal="frog">frog</button>
    </div>   

    <!-- <img src="https://media1.giphy.com/media/3o85xkQpyMlnBkpB9C/200_s.gif" data- still="https://media1.giphy.com/media/3o85xkQpyMlnBkpB9C/200_s.gif" data - animate="https://media1.giphy.com/media/3o85xkQpyMlnBkpB9C/200.gif" data - state="still" class= "gif" >
    <img src="https://media2.giphy.com/media/8rFQp4kHXJ0gU/200_s.gif" data-still="https://media2.giphy.com/media/8rFQp4kHXJ0gU/200_s.gif" data-animate="https://media2.giphy.com/media/8rFQp4kHXJ0gU/200.gif" data-state="still" class="gif">
    <img src="https://media3.giphy.com/media/W6LbnBigDe4ZG/200_s.gif" data-still="https://media3.giphy.com/media/W6LbnBigDe4ZG/200_s.gif" data-animate="https://media3.giphy.com/media/W6LbnBigDe4ZG/200.gif" data-state="still" class="gif"> -->

    <!-- Gifs will get dumped here-->
    <div id="gifs-appear-here"></div>
      
    <!-- Rendered buttons will get dumped here -->
    <div id="buttons-view"></div>

    <form id="animal-form"></form>
        <label for="animal-input"></label>
        <input type="text" id="animal-input"><br>


        <!--Button triggers new gifs to be added-->
        <input id="add-animal" type="submit" value="Add an Animal">
    </form>
        
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        //Initial array of animals
        var animals = ["cat", "dog", "pig", "frog"];

        // Function for dumping the JSON content for each button into the div
        

        $("button").on("click", function() {
            var animal = $(this).attr("data-animal");
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + animal + "&api_key=39d6115ec835449ab746a35d3e8e35b1=10";
    
            // $.ajax({
            //     url: queryURL,
            //     method: "GET"
            // }).then(function(response) {
            // console.log(response)
            //     $("#movies-view").text(JSON.stringify(response));
            //     // renderButtons();
            // });

            $.ajax({
                url: queryURL, 
                success: function(result){
                    console.log(result)
                }
            });

        });

        // $("#gifs").append(Json)
        //.then(function any console.log(response);


        //Function for displaying animals
        function renderButtons() {
            $("#buttons-view").empty();
        };

        var animalView = $("#animal-view");
        animalView.empty();
        // code goes here

        for (var i = 0; i < results.length; i++) {

            var gifDiv = $("<div class='item'>");
        
            var a = $("<button>");
            // Adding a class of movie to our button
            a.addClass("animal");
            // Adding a data-attribute
            a.attr("data-name", animal[i]);
            // Providing the initial button text
            a.text(animals[i]);
            // Adding the button to the buttons-view div
            $("#buttons-view").append(a);

        }
            

        var rating = results[i].rating;
        
        var p = $("<p>").text("Rating: " + rating);
        
        var personImage = $("<img>");
        animalImage.attr("src", results[i].images.fixed_height.url);
        
        gifDiv.prepend(p);
        gifDiv.prepend(animalsImage);
        
        $("#gifs-appear-here").prepend(gifDiv);

        //Ths function handles events where one button is clicked
        $("#add-animal").on("click", function(event) {

            event.preventDefault();
    
            var animal = $("animal-input").val.trim();

            movies.push(movie);
            console.log(movie);
            
            renderButtons();
    
        });

        $(document).on("click", ".animal", displayMovieInfo);

        //Calling the renderButtons function to display the initial list of animals
        renderButtons();

    </script>
    </div>
</body>
</html>